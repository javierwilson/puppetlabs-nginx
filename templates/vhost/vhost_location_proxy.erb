  location <%= location %> {
<% if @location_extra -%>
    <%= location_extra %>
<% end -%>
<% if @location_cfg_prepend -%><% location_cfg_prepend.each do |key,value| -%>
    <%= key %> <%= value %>;
<% end -%><% end -%>
    proxy_pass <%= proxy %>;
    proxy_read_timeout <%= proxy_read_timeout %>;
<% if @location_cfg_append -%><% location_cfg_append.each do |key,value| -%>
    <%= key %> <%= value %>;
<% end -%><% end -%>
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-Forwarded-Proto $scheme;
<% if @location_proxy_extra -%>
    <%= location_proxy_extra %>
<% end -%>
    <% if location != '/' %>
    proxy_set_header SCRIPT_NAME <%= location %>;
    <% end %>
    proxy_redirect off;
  }
